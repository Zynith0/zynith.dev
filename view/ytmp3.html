<!DOCTYPE html>
<html>
	<head>
		<title>Zynith</title>
		<link rel="icon" type="image/x-icon" href="https://rosepinetheme.com/assets/logo-main.png">
	</head>
	<body>
		<nav class="bar" style="opacity: 0; animation: short_enter .5s forwards; animation-delay: .5s;">
			<ul>
				<div class="imageflex" style="align-items: center;">
					<img src="https://rosepinetheme.com/assets/logo-main.png" height="70px" class="rose-pine" onclick="window.open('http://localhost:8080/', '_self');"> 
					<li class="imageflexcontent"><a href="http://192.168.0.141:8080/" style="padding: 10px;">Home</a></li>
					<li class="imageflexcontent"><a href="https://github.com/Zynith0" style="padding: 10px;">Github</a></li>
					<li class="imageflexcontent"><a href="http://192.168.0.141:8080/AboutMe" style="padding: 10px;">About Me</a></li>
					<!-- <li class="imageflexcontent"><a href="http://192.168.0.141:8080/Keyboards" style="padding: 10px;">Keyboards</a></li> -->
					<!-- <li class="imageflexcontent"><a href="http://192.168.0.141:8080/Pomodoro" style="padding: 10px;">Pomodoro Timer</a></li> -->
					<li class="imageflexcontent"><a href="http://192.168.0.141:8080/yt-mp3" style="padding: 10px;">Yt Downloader</a></li>
				</div>
			</ul>
		</nav>
		<div style="text-align: center;">
			<h1 style="color: white; font-weight: 1000;" class="yt_header">⬇️Youtube Downloader</h1>
		</div>
		<div style="text-align: center;">
			<img src="https://rosepinetheme.com/assets/logo-main.png" height="152" class="img"> 
		</div>
		<div style="text-align: center;">
			<input id="url" type="url" class="url"></input>
			<div style="text-align: center;">
				<select class="audio-format" id="audio-format">
					<option value="wav">wav</option>
					<option value="mp3">mp3</option>
					<option value="mp4">mp4</option>
				</select>
			</div>
			<button onclick="getInputValue();" class="download" id="download">download</button>
			<p class="note">Note: this may not work due to youtube being fucking stupid</p>
		</div>
<html>

<style>
* {
	font-family: Arial, Helvetica, sans-serif;
	font-weight: 500;
	line-height: 125%;
	color: #DEDDF4;
}

body {
	background-color: black;
}

.yt_header {
	opacity: 0;
	animation: short_enter 0.5s forwards;
	animation-delay: 0.3s;
}

.download {
	background-color: #22212E;
	border: solid #22212E;
	border-radius: 9999px;
	position: relative;
	transition: ease-in-out all 100ms;
	opacity: 0;
	animation: short_enter 0.5s forwards;
	animation-delay: 0.6s;
	left: 209px;
	top: 459px;
}

.download:hover {
	background-color: #2B2839;
	border-color: #2B2839;
	cursor: pointer;
}

.download:active {
	border-color: #5B737E;
}

.audio-format {
	background-color: #22212E;
	border: solid #22212E;
	border-radius: 9999px;
	position: relative;
	transition: ease-in-out all 100ms;
	opacity: 0;
	animation: short_enter 0.5s forwards;
	animation-delay: 0.6s;
	left: -220px;
	top: 485px;
}

.audio-format:hover {
	background-color: #2B2839;
	border-color: #2B2839;
	cursor: pointer;
}

.audio-format:active {
	border-color: #5B737E;
}

.url {
	color: white;
	background-color: transparent;
	border: solid #2D2F40;
	border-radius: 8px;
	width: 480px;
	position: relative;
	top: 480px;
	opacity: 0;
	animation: short_enter 0.5s forwards;
	animation-delay: 0.5s;
}

.img {
	position: relative;
	top: 480px;
	opacity: 0;
	animation: short_enter 0.5s forwards;
	animation-delay: 0.9s;
}

.note {
	color: #918DAA;
	font-weight: 700;
	font-size: 12px;
	opacity: 0;
	animation: short_enter .7s forwards;
	animation-delay: 1.7s;
	position: relative;
	top: 500px;
	/* right: 500px; */
}
</style>

<script>
function getInputValue() {
	const myInput = document.getElementById('url');
	const inputValue = myInput.value;
	const form = document.getElementById('audio-format').value;
	callMakeFile(inputValue, form);
}

let jsonObject;

async function callMakeFile(url, format) {
	const button = document.getElementById('download')
	button.innerText = "downloading..."
	const data = {
		Url: url,
		Format: format,
	};
	try {
		const response = await fetch("http://192.168.0.141:8080/startDownload", {
			method: "POST",
			body: JSON.stringify(data),
			headers: {
				"Content-type": "application/json",
			},
		});
		if (!response.ok) {
			throw new Error(`HTTP error!`)
		}
		// const blob = await response.blob();
		// const jsonString = await blob.text();
		// jsonObject = JSON.parse(jsonString)
		window.open("http://192.168.0.141:8080/test");
	} catch (error) {
		console.error("Error fetching or processing blob: ", error);
	}
	button.innerText = "download"
} 
</script>

<style>
@keyframes enter {
	0% {
		transform: translateY(100px);
		opacity: 0;
	}
	100% {
		transform: translateY(0);
		opacity: 1;
	}
}

@keyframes short_enter {
	0% {
		opacity: 0;
		transform: translateY(10px);
	}
	100% {
		opacity: 1;
		transform: none;
	}
}

* {
	font-weight: 500;
	line-height: 125%;
}

body {
	background-color: #1a1825;
	margin: 0px;
}

.bar {
	display: flex;
	justify-content: center;
	align-items: center;
}

.bar ul{
	padding: 4px;
	margin-top: 0px;
	list-style: none;
	background-color: #2D2F40;
	overflow: hidden;
	border: solid #2D2F40;
	border-radius: 9999px;
}

.bar a {
	border-radius: 9999px;
	border: solid #2D2F40;
	transition: background-color .2s, border .2s, scale .2s;
	font-weight: 700;
	font-size: 25px;
	color: white;
	text-decoration: none;
	margin-right: 50px;
	display: block;
	text-align: center;
	list-style: none;
}

.bar a:hover {
	background-color: #2B2839;
	border: solid 3px #2B2839;
}

.bar a:active {
	border: solid 3px #5F7783;
	scale: 0.95;
}

.bar li {
	display: inline-block;
}

.imageflex {
	display: flex;
}

.imageflexcontent {
	margin-left: 6px;
	margin-top: 0px;
}

.about {
	margin-left: 21px;
}

.github {
	margin-left: 21px;
}

.keyboard {
	margin-left: 21px;
}

.yt {
	margin-left: 21px;
}

.rose-pine {
	padding-right: 50px;
	transition: transform .1s;
}

.rose-pine:hover {
	cursor: pointer;
}

.rose-pine:active {
	transform: scale(0.95);
}
</style>

<script>
</script>
